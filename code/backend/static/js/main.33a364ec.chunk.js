(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{45:function(e,t,n){},47:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(36),a=n.n(r),i=(n(45),n(13)),o=(n(46),n(47),n(37)),l=n.n(o);var d=n(6),j=n(2),p="".xhrResponseSum,h=function(e){var t=e.meta,n=e.fileWithMeta,s=t.name,c=t.percent,r=t.status,a=t.previewUrl,i=n.xhr;return Object(j.jsxs)("div",{className:"preview-box",children:[Object(j.jsxs)("div",{className:"preview-image",children:[a&&Object(j.jsx)("img",{width:200,src:a,alt:s,title:s}),Object(j.jsx)("span",{className:"name",children:s})]}),Object(j.jsxs)("div",{className:"preview-progress",children:["done"!==r&&Object(j.jsx)("progress",{max:100,value:"done"===r||"headers_received"===r?100:c}),"done"!==r&&Object(j.jsx)("span",{className:"status",children:r})]}),Object(j.jsx)("div",{className:"preview-plot",children:"done"===r&&Object(j.jsxs)(d.e,{xType:"ordinal",width:500,height:220,yDomain:[0,1],xDistance:10,style:{backgroundColor:"#ffffff"},children:[Object(j.jsx)(d.d,{title:"Age",tickLabelAngle:-0,style:{text:{fontSize:12}}}),Object(j.jsx)(d.f,{title:"Probability"}),Object(j.jsx)(d.c,{}),Object(j.jsx)(d.a,{style:{stroke:"#B7E9ED"}}),Object(j.jsx)(d.b,{data:i.response?JSON.parse(i.response):null})]})}),"done"!==r&&Object(j.jsx)("h3",{children:p=""}),"done"===r&&!p.includes(i.response)&&Object(j.jsxs)("div",{class:"jsonContentDiv",style:{display:"none"},children:["{",p+=(p?",":"")+JSON.stringify(s.replace(/\.[^/.]+$/,""))+": "+i.responseText,"}"]})]})};var b=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)([]),a=Object(i.a)(r,2),o=a[0],d=a[1];Object(s.useEffect)((function(){fetch("/fishtype").then((function(e){return e.json()})).then((function(e){d(e.items)})).then((function(){}))}),[]);var p=Object(s.useState)(!1),b=Object(i.a)(p,2);return b[0],b[1],Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("h3",{children:"1. Select Fish Type"}),Object(j.jsx)("div",{className:"fish-type-selector",children:o.map((function(e){return Object(j.jsx)("div",{className:"form-check form-check-inline",children:Object(j.jsxs)("label",{className:"form-check-label",children:[e.description,Object(j.jsx)("input",{type:"radio",name:"fishType",className:"form-check-input",value:e.model,checked:n===e.model,onChange:function(e){return c(e.currentTarget.value)}},e.model)]})})}))}),Object(j.jsx)("h3",{children:"2. Drop or Choose Otolith Images (.jpg or .png, max = 30 per minute)"}),Object(j.jsx)("div",{classeName:"file-dropzone",children:n&&Object(j.jsx)(l.a,{getUploadParams:function(e){var t=e.file,s=new FormData;return s.append("images",t),s.append("fishType",n),{url:"/predict",body:s}},maxFiles:30,timeout:6e4,styles:{dropzone:{overflow:"auto",height:"350px",border:"1px solid #999",background:"#f5f5f5"},inputLabelWithFiles:{margin:"20px 3%"}},canRemove:!1,PreviewComponent:h,accept:"image/*,"})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(){var e,t=document.createElement("a"),n=document.getElementsByClassName("jsonContentDiv").length-1;e=document.getElementsByClassName("jsonContentDiv")[n].innerHTML;var s=JSON.parse(e),c=0;for(var r in s)for(var a=s[r],i=0;i<2;i++)c=parseInt(a.length);var o="Image/Age-group-probabilities";if(6==c)for(var l=0;l<c;l++)o+=" Age-"+l;else for(var d=1;d<=c;d++)o+=" Age-"+d;o+=" Age-prediction\r\n";var j={};for(var p in s){for(var h=0,b=s[p],u=p+" ",f=0;f<b.length;f++)u+=parseFloat(b[f].y).toFixed(2),parseFloat(b[f].y).toFixed(4)>h&&(h=parseFloat(b[f].y).toFixed(4),j=parseInt(f)),f<b.length&&(u+=" ");6!=c&&(j+=1),o+=(u+=j)+"\r\n"}var m=new Blob([o],{type:"text/csv"});t.href=URL.createObjectURL(m),t.download="export.csv",document.body.appendChild(t),t.click()},children:"Export to CSV"}),"\xa0",Object(j.jsx)("button",{onClick:function(){window.location.reload()},children:"Refresh page"})]})]})},u=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),r(e),a(e)}))};a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(b,{})}),document.getElementById("root")),u()}},[[69,1,2]]]);
//# sourceMappingURL=main.33a364ec.chunk.js.map